redlite-dst Phase 5.2: Implement Remaining DST Commands

=== CURRENT STATE ===

âœ… COMPLETED (Session 21):
- Wired up actual redlite library (replaced mock)
- 7 smoke tests with real operation verification (7/7 passing, 34ms)
- Seed management: seeds list/add/test (1/1 regression seeds passing)
- Property tests: 7 properties working with real Redlite (70/70 passing, 223ms)
- Files: client.rs, runner.rs, properties.rs, main.rs fully functional

=== NEXT TASKS ===

Priority order for remaining DST commands:

1. ORACLE (Redis comparison)
   - Update runner.rs oracle() to actually execute
   - Start Redis in Docker: docker run -d -p 6379:6379 redis
   - For each test group (strings, lists, hashes, sets, sorted sets):
     * Run identical operation sequences on both Redis and Redlite
     * Assert outputs match exactly
     * Track divergences and compatibility percentage
   - Use redis crate (already in dev-dependencies)
   - Test groups: basic ops, edge cases, error conditions

2. SIMULATE (MadSim deterministic simulation)
   - Add madsim, madsim-tokio to Cargo.toml (cfg-gated)
   - Update runner.rs simulate() to use MadSim
   - Scenarios: concurrent_operations, crash_recovery, connection_storm
   - Each scenario runs with deterministic seed for reproducibility
   - Report invariant violations with seed for replay

3. CHAOS (Fault injection)
   - Update runner.rs chaos() to inject actual faults
   - Implement faults: disk_full, corrupt_read, slow_write, crash_mid_write
   - Test that Redlite handles each fault gracefully (no corruption)
   - Use test-seeded RNG to control fault timing

4. STRESS (Scale testing)
   - Update runner.rs stress() to measure performance under load
   - Tests: high connection count (10, 100, 1000), large key space (1K, 100K, 1M)
   - Monitor: throughput (ops/sec), latency (p50, p99), memory usage, open files
   - Success criteria: stable under load, no leaks, no deadlocks

5. FUZZ (Fuzzing harness)
   - Update runner.rs fuzz() to use libfuzzer or proptest
   - Targets: resp_parser, query_parser (FT.SEARCH)
   - Run for specified duration, track crash count
   - Integration with cargo-fuzz

6. SOAK (Long-running stability)
   - Update runner.rs soak() to run continuous operations
   - Monitor RSS memory, open FDs, disk usage over time
   - Check intervals: sample metrics every N seconds
   - Fail if unbounded growth detected (memory leak)

7. CLOUD (Fly.io parallel execution)
   - Create Dockerfile for redlite-dst
   - Create fly.toml for ephemeral machines
   - Split seed ranges across machines
   - Aggregate results from all machines
   - Cost target: ~$0.03 per 100K seeds

8. Report output formats
   - Implement JSON report generation (report.rs has structure)
   - Implement Markdown report generation
   - CLI flags: --format json/markdown, --output report.{json,md}

=== IMPLEMENTATION NOTES ===

Current structure:
- redlite-dst/src/client.rs - RedliteClient wrapper (COMPLETE, working)
- redlite-dst/src/runner.rs - TestRunner with all command stubs
- redlite-dst/src/properties.rs - 7 property tests (COMPLETE, working)
- redlite-dst/src/types.rs - TestResult, TestSummary, etc.
- redlite-dst/src/report.rs - JSON/Markdown report structures (unused)
- redlite-dst/tests/regression_seeds.txt - Seed bank (working)

Code patterns to follow:
1. Each test command should:
   - Print header with self.print_header()
   - Create progress bar with self.progress_bar()
   - Accumulate results in TestSummary
   - Print summary with self.print_summary()
   - Bail if any failures

2. Seed-based reproducibility:
   - Use ChaCha8Rng with seed_from_u64(seed)
   - Log seed with each failure
   - Allow replay with --seed flag

3. Use actual Redlite via RedliteClient:
   - RedliteClient::new_memory() for in-memory tests
   - RedliteClient::new_file(path) for persistence tests
   - All operations wrapped and working

Dependencies to add:
- madsim + madsim-tokio (for simulate)
- redis crate (for oracle) - already in dev-dependencies
- sysinfo or similar (for monitoring in soak/stress)
- Optional: libfuzzer-sys, cargo-fuzz (for fuzz)

Test philosophy:
- Every failure must be reproducible with a seed
- Regression seeds protect against regressions
- Battle testing finds bugs that months of prod use would surface
- Inspired by TigerBeetle VOPR, sled simulation, MadSim

=== SUCCESS CRITERIA ===

Before HN launch:
- 100K+ seeds pass property tests
- Zero divergences from Redis oracle (common commands)
- Crash recovery verified with fault injection
- 1M key scale tested without OOM
- 1000 connection scale without deadlock
- 24h soak test with stable memory (no leaks)
- 10min fuzz with no crashes

=== REFERENCE ===

Existing smoke tests (working examples):
- smoke_basic_set_get() - client.set/get pattern
- smoke_basic_persistence() - file-backed DB with tempfile
- All in runner.rs lines 141-244

Property tests (working examples):
- SetGetRoundtrip, IncrIsMonotonic, etc.
- All in properties.rs

Commands already working:
- smoke (7/7 passing)
- properties --seeds N (70/70 passing)
- seeds list/add/test (working)

Next command to implement: oracle (highest priority for Redis compatibility)
