Session 22.3: WATCH/UNWATCH Implementation

Implement Redis WATCH/UNWATCH optimistic locking for transactions.

Background:
WATCH allows clients to mark keys for modification detection. If any watched key is modified by another client before EXEC, the transaction aborts (EXEC returns nil). This enables optimistic locking patterns.

Implementation steps:

1. Schema: Add version column to keys table
   - ALTER TABLE keys ADD COLUMN version INTEGER NOT NULL DEFAULT 0
   - Increment version on every write operation

2. db.rs changes:
   - Add get_version(key) -> Result<u64> method
   - Returns current version, or 0 if key doesn't exist
   - Update all write operations to increment version (SET, DEL, HSET, HDEL, LPUSH, RPUSH, SADD, SREM, ZADD, ZREM, XADD, etc.)

3. pubsub.rs changes:
   - Change ConnectionState::Normal from unit variant to struct with watched_keys: HashMap<String, u64>
   - Add watched_keys field to ConnectionState::Transaction
   - Update all pattern matches on ConnectionState throughout the file
   - Add cmd_watch(state, args, db) -> RespValue
   - Add cmd_unwatch(state) -> RespValue

4. server/mod.rs changes:
   - Import cmd_watch and cmd_unwatch from pubsub
   - Add WATCH/UNWATCH dispatch in execute_normal_command (before pub/sub match)
   - Update cmd_multi to preserve watched_keys when entering transaction mode
   - Update execute_transaction to check watched key versions before executing
   - If any version changed, return RespValue::null() instead of executing
   - Update all ConnectionState pattern matches

5. Integration tests:
   - Test WATCH returns OK
   - Test UNWATCH clears watched keys
   - Test EXEC succeeds when watched key not modified
   - Test EXEC returns nil when watched key modified by another connection
   - Test multiple watched keys (partial modification)
   - Test watching non-existent key that gets created

Key behaviors:
- WATCH not allowed in transaction mode (already handled)
- WATCH not allowed in subscription mode
- UNWATCH clears all watched keys
- DISCARD clears transaction queue but keeps watched keys
- EXEC clears watched keys regardless of success/failure
- Watching non-existent key: version 0, any creation counts as modification

Files to modify:
- src/schema.sql
- src/db.rs
- src/server/pubsub.rs
- src/server/mod.rs
- tests/integration.rs

Run make test before marking complete.
