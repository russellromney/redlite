# Oracle Test Specification: List Commands

name: List Commands
version: "1.0"

tests:
  # ==========================================================================
  # LPUSH / RPUSH basics
  # ==========================================================================

  - name: LPUSH single value
    operations:
      - { cmd: LPUSH, args: ["list", ["a"]], expect: 1 }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a"] }

  - name: LPUSH multiple values
    operations:
      - { cmd: LPUSH, args: ["list", ["a", "b", "c"]], expect: 3 }
      # LPUSH inserts left-to-right, so order is c, b, a
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["c", "b", "a"] }

  - name: RPUSH single value
    operations:
      - { cmd: RPUSH, args: ["list", ["a"]], expect: 1 }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a"] }

  - name: RPUSH multiple values
    operations:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]], expect: 3 }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a", "b", "c"] }

  - name: LPUSH and RPUSH combined
    operations:
      - { cmd: RPUSH, args: ["list", ["middle"]], expect: 1 }
      - { cmd: LPUSH, args: ["list", ["first"]], expect: 2 }
      - { cmd: RPUSH, args: ["list", ["last"]], expect: 3 }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["first", "middle", "last"] }

  # ==========================================================================
  # LPOP / RPOP
  # ==========================================================================

  - name: LPOP single element (no count)
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LPOP, args: ["list"], expect: "a" }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["b", "c"] }

  - name: RPOP single element (no count)
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: RPOP, args: ["list"], expect: "c" }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a", "b"] }

  - name: LPOP with count
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c", "d"]] }
    operations:
      - { cmd: LPOP, args: ["list", 2], expect: ["a", "b"] }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["c", "d"] }

  - name: RPOP with count
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c", "d"]] }
    operations:
      - { cmd: RPOP, args: ["list", 2], expect: ["d", "c"] }
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a", "b"] }

  - name: LPOP from empty list returns null
    operations:
      - { cmd: LPOP, args: ["nonexistent"], expect: null }

  - name: RPOP from empty list returns null
    operations:
      - { cmd: RPOP, args: ["nonexistent"], expect: null }

  # ==========================================================================
  # LLEN
  # ==========================================================================

  - name: LLEN counts elements
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LLEN, args: ["list"], expect: 3 }

  - name: LLEN nonexistent list
    operations:
      - { cmd: LLEN, args: ["nonexistent"], expect: 0 }

  # ==========================================================================
  # LRANGE
  # ==========================================================================

  - name: LRANGE full list
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c", "d", "e"]] }
    operations:
      - { cmd: LRANGE, args: ["list", 0, -1], expect: ["a", "b", "c", "d", "e"] }

  - name: LRANGE partial list
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c", "d", "e"]] }
    operations:
      - { cmd: LRANGE, args: ["list", 1, 3], expect: ["b", "c", "d"] }

  - name: LRANGE with negative indices
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c", "d", "e"]] }
    operations:
      - { cmd: LRANGE, args: ["list", -3, -1], expect: ["c", "d", "e"] }

  - name: LRANGE out of bounds
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LRANGE, args: ["list", 0, 100], expect: ["a", "b", "c"] }

  - name: LRANGE nonexistent list
    operations:
      - { cmd: LRANGE, args: ["nonexistent", 0, -1], expect: [] }

  # ==========================================================================
  # LINDEX
  # ==========================================================================

  - name: LINDEX positive index
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LINDEX, args: ["list", 0], expect: "a" }
      - { cmd: LINDEX, args: ["list", 1], expect: "b" }
      - { cmd: LINDEX, args: ["list", 2], expect: "c" }

  - name: LINDEX negative index
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LINDEX, args: ["list", -1], expect: "c" }
      - { cmd: LINDEX, args: ["list", -2], expect: "b" }

  - name: LINDEX out of range
    setup:
      - { cmd: RPUSH, args: ["list", ["a", "b", "c"]] }
    operations:
      - { cmd: LINDEX, args: ["list", 10], expect: null }

  - name: LINDEX nonexistent list
    operations:
      - { cmd: LINDEX, args: ["nonexistent", 0], expect: null }